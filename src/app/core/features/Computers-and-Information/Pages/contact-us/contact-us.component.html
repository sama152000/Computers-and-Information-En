<!-- Loading State -->
<div class="contact-us-page" *ngIf="isLoading">
  <section class="hero-section">
    <div class="overlay"></div>
    <div class="container-fluid">
      <p-skeleton width="300px" height="3rem" styleClass="mb-3" />
      <p-skeleton width="400px" height="1.5rem" />
    </div>
  </section>
  <div class="container-fluid">
    <div class="contact-content">
      <div class="row g-4 mb-5">
        <div class="col-lg-4 col-md-6" *ngFor="let i of [1, 2, 3]">
          <div class="info-card">
            <p-skeleton shape="circle" size="60px" styleClass="mb-3" />
            <p-skeleton width="100px" height="1.5rem" styleClass="mb-2" />
            <p-skeleton width="100%" height="1rem" />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Error State -->
<div class="contact-us-page error-page" *ngIf="hasError && !isLoading">
  <div class="container-fluid">
    <div class="error-container">
      <i class="pi pi-exclamation-triangle error-icon"></i>
      <h2>Failed to load contact information</h2>
      <p>Please try again later.</p>
    </div>
  </div>
</div>

<!-- Content State -->
<ng-container *ngIf="!isLoading && !hasError && contact">
  <section class="hero-section">
    <div class="overlay"></div>
    <div class="container-fluid">
      <h1 class="hero-title">Get in Touch</h1>
      <p class="hero-subtitle">
        We're here to help and answer any question you might have
      </p>
    </div>
  </section>

  <div class="contact-us-page">
    <div class="container-fluid">
      <div class="contact-content">
        <!-- Contact Info Cards -->
        <div class="row g-4 mb-5">
          <div class="col-lg-4 col-md-6">
            <div class="info-card">
              <div class="icon-wrapper">
                <i class="pi pi-map-marker"></i>
              </div>
              <h3>Location</h3>
              <p>{{ contact.address }}</p>
              <a
                [href]="contact.mapLocation"
                target="_blank"
                class="view-map"
                *ngIf="contact.mapLocation"
              >
                View on Google Maps <i class="pi pi-external-link"></i>
              </a>
            </div>
          </div>

          <div class="col-lg-4 col-md-6">
            <div class="info-card">
              <div class="icon-wrapper">
                <i class="pi pi-phone"></i>
              </div>
              <h3>Phone & Fax</h3>
              <div class="phone-list">
                @for (phone of getPhoneNumbers(); track phone) {
                <p>
                  <a [href]="'tel:' + phone">{{ phone }}</a>
                </p>
                } @if (contact.fax) {
                <p class="text-muted">Fax: {{ contact.fax }}</p>
                }
              </div>
            </div>
          </div>

          <div class="col-lg-4 col-md-6">
            <div class="info-card">
              <div class="icon-wrapper">
                <i class="pi pi-globe"></i>
              </div>
              <h3>Website</h3>
              <p *ngIf="contact.webSite">
                <a [href]="contact.webSite" target="_blank">{{
                  contact.webSite
                }}</a>
              </p>
              <p *ngIf="!contact.webSite">Not available</p>
            </div>
          </div>
        </div>

        <!-- Email & Social -->
        <div class="row g-4 mb-5">
          <div class="col-lg-6">
            <div class="email-card">
              <i class="pi pi-envelope"></i>
              <h3>Send us an Email</h3>
              <p>We typically reply within 24 hours</p>
              <a [href]="'mailto:' + contact.email" class="btn-email">
                {{ contact.email }}
              </a>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="social-card">
              <h3>Follow Us</h3>
              <div class="social-links">
                @for (link of socialLinks; track link.name) {
                <a
                  [href]="link.url"
                  target="_blank"
                  class="social-btn"
                  [title]="link.name"
                >
                  <i [class]="link.icon"></i>
                </a>
                }
              </div>
            </div>
          </div>
        </div>

        <!-- WhatsApp Contact -->
        <div class="whatsapp-section" *ngIf="contact?.whatsApp">
          <div class="whatsapp-card">
            <div class="whatsapp-icon">
              <i class="pi pi-whatsapp"></i>
            </div>

            <div class="whatsapp-info">
              <h3>Contact via WhatsApp</h3>
              <p>Available on WhatsApp</p>
              <span class="whatsapp-number">
                {{ formattedWhatsApp }}
              </span>
            </div>
          </div>
        </div>

        <!-- Map Embed -->
        <div class="map-section">
          <h2 class="section-title">Find Us on the Map</h2>
          <div class="map-container-fluid">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3628.944979237888!2d32.6462!3d25.6991!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14497e4a4b9c1d8d%3A0x8f8e8e8e8e8e8e8e!2sLuxor%20University!5e0!3m2!1sen!2seg!4v1699999999999"
              width="100%"
              height="450"
              style="border: 0"
              allowfullscreen=""
              loading="lazy"
            >
            </iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<app-footer></app-footer>
